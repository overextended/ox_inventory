(this.webpackJsonpox_inventory=this.webpackJsonpox_inventory||[]).push([[0],{50:function(t,e,n){},51:function(t,e,n){"use strict";n.r(e);var r,i=n(0),o=n.n(i),c=n(20),a=n.n(c),s=n(18),u=n(57),l=n(36),d=n(11),m=n(6),b=n(3);!function(t){t.PLAYER="player",t.SHOP="shop"}(r||(r={}));var v=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return void 0!==t.name&&void 0!==t.weight||e&&void 0!==t.name&&void 0!==t.count&&void 0!==t.weight},f=function(t,e,n){return{sourceInventory:e===r.PLAYER?t.leftInventory:t.rightInventory,targetInventory:n?n===r.PLAYER?t.leftInventory:t.rightInventory:e===r.PLAYER?t.rightInventory:t.leftInventory}},j=Object(d.c)({name:"inventory",initialState:{leftInventory:{id:"",type:"",slots:0,maxWeight:0,items:[]},rightInventory:{id:"",type:"",slots:0,maxWeight:0,items:[]},itemAmount:0,shiftPressed:!1,isBusy:!1},reducers:{stackSlots:function(t,e){var n=e.payload,i=n.fromSlot,o=n.fromType,c=n.toSlot,a=n.toType,s=n.count,u=f(t,o,a),l=u.sourceInventory,d=u.targetInventory,m=i.weight/i.count;d.items[c.slot-1]=Object(b.a)(Object(b.a)({},d.items[c.slot-1]),{},{count:c.count+s,weight:m*(c.count+s)}),o!==r.SHOP&&(l.items[i.slot-1]=i.count-s>0?Object(b.a)(Object(b.a)({},l.items[i.slot-1]),{},{count:i.count-s,weight:m*(i.count-s)}):{slot:i.slot})},swapSlots:function(t,e){var n=e.payload,r=n.fromSlot,i=n.fromType,o=n.toSlot,c=n.toType,a=f(t,i,c),s=a.sourceInventory,u=a.targetInventory,l=[Object(b.a)(Object(b.a)({},u.items[o.slot-1]),{},{slot:r.slot}),Object(b.a)(Object(b.a)({},s.items[r.slot-1]),{},{slot:o.slot})];s.items[r.slot-1]=l[0],u.items[o.slot-1]=l[1]},setupInventory:function(t,e){var n=e.payload,r=n.leftInventory,i=n.rightInventory;r&&(t.leftInventory=Object(b.a)(Object(b.a)({},r),{},{items:Array.from(Array(r.slots),(function(t,e){return Object.values(r.items).find((function(t){return(null===t||void 0===t?void 0:t.slot)===e+1}))||{slot:e+1}}))})),i&&(t.rightInventory=Object(b.a)(Object(b.a)({},i),{},{items:Array.from(Array(i.slots),(function(t,e){return Object.values(i.items).find((function(t){return(null===t||void 0===t?void 0:t.slot)===e+1}))||{slot:e+1}}))}))},moveSlots:function(t,e){var n=e.payload,i=n.fromSlot,o=n.fromType,c=n.toSlot,a=n.toType,s=n.count,u=f(t,o,a),l=u.sourceInventory,d=u.targetInventory,m=i.weight/i.count;d.items[c.slot-1]=Object(b.a)(Object(b.a)({},l.items[i.slot-1]),{},{count:s,weight:m*s,slot:c.slot}),o!==r.SHOP&&(l.items[i.slot-1]=i.count-s>0?Object(b.a)(Object(b.a)({},l.items[i.slot-1]),{},{count:i.count-s,weight:m*(i.count-s)}):{slot:i.slot})},refreshSlots:function(t,e){Array.isArray(e.payload)||(e.payload=[e.payload]),Object.values(e.payload).filter((function(t){return!!t})).forEach((function(e){(e.inventory&&e.inventory!==r.PLAYER?t.rightInventory:t.leftInventory).items[e.item.slot-1]=e.item}))},setItemAmount:function(t,e){t.itemAmount=e.payload},setShiftPressed:function(t,e){t.shiftPressed=e.payload}},extraReducers:function(t){t.addMatcher(d.e,(function(t){t.isBusy=!0,t.history={leftInventory:Object(m.a)(t.leftInventory),rightInventory:Object(m.a)(t.rightInventory)}})),t.addMatcher(d.d,(function(t){t.isBusy=!1})),t.addMatcher(d.f,(function(t){t.history&&t.history.leftInventory&&t.history.rightInventory&&(t.leftInventory=t.history.leftInventory,t.rightInventory=t.history.rightInventory),t.isBusy=!1}))}}),y=j.actions,O=y.setItemAmount,h=y.setShiftPressed,g=y.setupInventory,p=y.swapSlots,x=y.moveSlots,w=y.stackSlots,I=y.refreshSlots,S=function(t){return t.inventory.leftInventory},k=function(t){return t.inventory.rightInventory},L=function(t){return t.inventory.itemAmount},N=function(t){return t.inventory.isBusy},A=j.reducer,E=Object(d.a)({reducer:{inventory:A}}),T=function(){return Object(s.b)()},C=s.c,R=n(5),P=function(){return!window.invokeNative},D=function(){},B=function(t,e){var n=Object(i.useRef)(D);Object(i.useEffect)((function(){n.current=e}),[e]),Object(i.useEffect)((function(){var e=function(e){var r=e.data,i=r.action,o=r.data;n.current&&i===t&&n.current(o)};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}),[t])},F=B,M=n(55),V=n(1),H=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},W=function(t,e){var n=t.getClientOffset();if(null===n)return null;if(!e.current||!e.current.getBoundingClientRect)return H(n,function(t){var e=t.getInitialClientOffset(),n=t.getInitialSourceClientOffset();return null===e||null===n||void 0===e.x||void 0===e.y?{x:0,y:0}:H(e,n)}(t));var r=e.current.getBoundingClientRect(),i={x:r.width/2,y:r.height/2};return H(n,i)},G=function(){var t=Object(i.useRef)(null),e=Object(M.a)((function(e){return{data:e.getItem(),currentOffset:W(e,t),isDragging:e.isDragging()}})),n=e.data,r=e.isDragging,o=e.currentOffset;return Object(V.jsx)(V.Fragment,{children:r&&o&&n.item&&Object(V.jsx)("div",{ref:t,className:"drag",style:{transform:"translate(".concat(o.x,"px, ").concat(o.y,"px)"),backgroundImage:"url(".concat("/web/build"+"/images/".concat(n.item.name,".png"),")")}})})},Y=(n(45),n(9)),U=function(t){Object(Y.b)(t.text,{duration:t.duration||4e3,position:t.position||"top-center",style:{backgroundColor:void 0===t.type?"rgb(52, 152, 219)":"success"===t.type?"rgb(39, 174, 96)":"rgb(231, 76, 60)"}})},J=function(){return B("showNotif",(function(t){U(t)})),Object(V.jsx)(Y.a,{toastOptions:{style:{color:"white",borderRadius:"5px",padding:"4px"}}})},_=n(12),q=n.n(_),z=n(13);function K(t,e){return Q.apply(this,arguments)}function Q(){return(Q=Object(z.a)(q.a.mark((function t(e,n){var r,i,o,c;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={method:"post",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(n)},i=window.GetParentResourceName?window.GetParentResourceName():"nui-frame-app",t.next=4,fetch("https://".concat(i,"/").concat(e),r);case 4:return o=t.sent,t.next=7,o.json();case 7:return c=t.sent,t.abrupt("return",c);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var X=function(){var t=Object(i.useState)(0),e=Object(R.a)(t,2),n=e[0],r=e[1],o=Object(i.useState)(!1),c=Object(R.a)(o,2),a=c[0],s=c[1],u=Object(i.useState)(!1),l=Object(R.a)(u,2),d=l[0],m=l[1],b=Object(i.useState)(""),v=Object(R.a)(b,2),f=v[0],j=v[1];return F("startProgress",(function(t){j(t.text),r(t.duration),s(!0),m(!1)})),F("cancelProgress",(function(){m(!0),setTimeout((function(){return s(!1)}),1750)})),Object(V.jsx)(V.Fragment,{children:a&&Object(V.jsx)("div",{className:"progressBar",children:Object(V.jsx)("div",{className:d?"progressBar-cancel":"progressBar-value",style:{animationDuration:"".concat(n,"ms")},onAnimationEnd:function(){s(!1),K("ox_inventory:ProgressComplete")},children:Object(V.jsx)("span",{children:f})})})})},Z=function(t){var e=o.a.useState(!1),n=Object(R.a)(e,2),r=n[0],i=n[1],c=o.a.useCallback((function(e){e.key===t&&i(!0)}),[t]),a=o.a.useCallback((function(e){e.key===t&&i(!1)}),[t]);return o.a.useEffect((function(){return window.addEventListener("keydown",c),window.addEventListener("keyup",a),function(){window.removeEventListener("keydown",c),window.removeEventListener("keyup",a)}}),[c,a]),r},$={water:{close:!1,label:"VODA",stack:!0,usable:!0},burger:{close:!1,label:"BURGR",stack:!1,usable:!1}},tt=function(t){return Object(V.jsx)("div",{style:{opacity:t.visible?1:0,transition:"opacity ".concat(t.duration||.2,"s ease-out")},className:t.className,children:t.children})},et=function(t,e,n){return t*n+e*(1-n)},nt=function(t,e,n){var r=et(t[0],e[0],n),i=et(t[1],e[1],n),o=et(t[2],e[2],n);return"rgb(".concat(r,", ").concat(i,", ").concat(o,")")},rt=[231,76,60],it=[39,174,96],ot=[211,84,0],ct=function(t){var e=t.percent,n=t.durability,r=o.a.useMemo((function(){return n?e<50?nt(ot,rt,e/100):nt(it,ot,e/100):e>50?nt(rt,ot,e/100):nt(ot,it,e/50)}),[n,e]);return Object(V.jsx)("div",{className:n?"item-durability":"weight-bar",children:Object(V.jsx)("div",{style:{visibility:e>0?"visible":"hidden",width:"".concat(e,"%"),backgroundColor:r,transition:"background ".concat(.3,"s ease, width ",.3,"s ease")}})})},at=n(58),st=n(59),ut=Object(d.b)("inventory/validateMove",function(){var t=Object(z.a)(q.a.mark((function t(e,n){var r,i;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,K("swapItems",e);case 4:!1===(i=t.sent)&&r(i),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),r(!1);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),lt=Object(d.b)("inventory/buyItem",function(){var t=Object(z.a)(q.a.mark((function t(e,n){var r,i;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,K("buyItem",e);case 4:!1===(i=t.sent)&&r(i),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),r(!1);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),dt=function(t){var e,n,i,c=t.inventory,a=t.item,s=t.setCurrentItem,u=C(N),l=Object(at.a)((function(){return{type:"SLOT",collect:function(t){return{isDragging:t.isDragging()}},item:function(){return v(a,c.type!==r.SHOP)?{inventory:c.type,item:{name:a.name,slot:a.slot}}:null},canDrag:!u}}),[u,c,a]),d=Object(R.a)(l,2),m=d[0].isDragging,j=d[1],y=Object(st.a)((function(){return{accept:"SLOT",collect:function(t){return{isOver:t.isOver()}},drop:function(t){return t.inventory===r.SHOP?function(t,e){var n=E.getState().inventory,r=n.rightInventory,i=n.leftInventory,o=r.items[t.item.slot-1];if(v(o))if(0!==o.count)if(void 0!==$[o.name]){var c=i.items[e.item.slot-1];if(void 0!==c){var a=0!==n.itemAmount?o.count&&n.itemAmount>o.count?o.count:n.itemAmount:1,s={fromSlot:o,toSlot:c,fromType:r.type,toType:i.type,count:a};if(!P()){var u=E.dispatch(lt(Object(b.a)(Object(b.a)({},s),{},{fromSlot:o.slot,toSlot:c.slot})));Y.b.promise(u,{loading:"VALIDATING SHOP",success:"VALIDATED",error:"ERROR"})}}else Y.b.error("Target slot undefined")}else Y.b.error("Item ".concat(o.name," data undefined!"));else Y.b.error("Out of stock");else Y.b.error("Item ".concat(o.slot," name === undefined"))}(t,{inventory:c.type,item:{slot:a.slot}}):function(t,e){var n=E.getState().inventory,r=f(n,t.inventory,null===e||void 0===e?void 0:e.inventory),i=r.sourceInventory,o=r.targetInventory,c=i.items[t.item.slot-1],a=$[c.name];if(void 0===a)throw new Error("".concat(c.name," item data undefined!"));var s=e?o.items[e.item.slot-1]:function(t,e,n){return e.stack&&n.find((function(e){return e.name===t.name&&e.metadata===t.metadata}))||n.find((function(t){return void 0===t.name}))}(c,a,o.items);if(void 0===s)throw new Error("Target slot undefined!");var u=n.shiftPressed&&c.count>1?Math.floor(c.count/2):0===n.itemAmount||n.itemAmount>c.count?c.count:n.itemAmount,l={fromSlot:c,toSlot:s,fromType:i.type,toType:o.type,count:u};if(!P()){var d=E.dispatch(ut(Object(b.a)(Object(b.a)({},l),{},{fromSlot:c.slot,toSlot:s.slot})));Y.b.promise(d,{loading:"VALIDATING",success:"VALIDATED",error:"ERROR"})}v(s,!0)?a.stack&&function(t,e){return t.name===e.name&&t.metadata===e.metadata}(c,s)?E.dispatch(w(Object(b.a)(Object(b.a)({},l),{},{toSlot:s}))):E.dispatch(p(Object(b.a)(Object(b.a)({},l),{},{toSlot:s}))):E.dispatch(x(l))}(t,{inventory:c.type,item:{slot:a.slot}})},canDrop:function(t){return!u&&(t.item.slot!==a.slot||t.inventory!==c.type)&&c.type!==r.SHOP}}}),[u,c,a]),O=Object(R.a)(y,2),h=O[0].isOver,g=O[1],I=o.a.useCallback((function(){return v(a)&&s(a)}),[a,s]),S=o.a.useCallback((function(){return v(a)&&s(void 0)}),[a,s]);return Object(V.jsx)(V.Fragment,{children:Object(V.jsx)("div",{ref:function(t){return j(g(t))},className:"item-container",style:{opacity:m?.4:1,backgroundImage:"url(".concat("/web/build"+"/images/".concat(a.name,".png"),")")||!1,border:h?"0.1vh dashed rgba(255,255,255,0.5)":"0.1vh inset rgba(0,0,0,0)"},onMouseEnter:I,onMouseLeave:S,children:v(a)&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("div",{className:"item-count",children:Object(V.jsxs)("span",{children:[a.weight>=1e3?"".concat((a.weight/1e3).toLocaleString("en-us",{minimumFractionDigits:2}),"kg"):"".concat(a.weight.toLocaleString("en-us",{minimumFractionDigits:0}),"g")," ",null===(e=a.count)||void 0===e?void 0:e.toLocaleString("en-us"),"x"]})}),(null===(n=a.metadata)||void 0===n?void 0:n.durability)&&Object(V.jsx)(ct,{percent:a.metadata.durability,durability:!0}),Object(V.jsxs)("div",{className:"item-label",children:["[",a.slot,"] ",(null===(i=$[a.name])||void 0===i?void 0:i.label)||"NO LABEL"]})]})})})},mt=function(t){var e,n=t.inventory,r=o.a.useState(),i=Object(R.a)(r,2),c=i[0],a=i[1],s=o.a.useMemo((function(){return void 0!==n.maxWeight?n.items.reduce((function(t,e){return e.weight?t+e.weight:t}),0):0}),[n.maxWeight,n.items]);return Object(V.jsxs)("div",{className:"column-wrapper",children:[Object(V.jsxs)("div",{className:"inventory-label",children:[Object(V.jsxs)("p",{children:[n.label&&"".concat(n.label," -"),n.id]}),n.maxWeight&&Object(V.jsxs)("div",{children:[s/1e3,"/",n.maxWeight/1e3,"kg"]})]}),Object(V.jsx)(ct,{percent:n.maxWeight?s/n.maxWeight*100:0}),Object(V.jsx)("div",{className:"inventory-grid",children:n.items.map((function(t){return Object(V.jsx)(dt,{item:t,inventory:n,setCurrentItem:a},"".concat(n.type,"-").concat(n.id,"-").concat(t.slot))}))}),Object(V.jsx)("div",{children:Object(V.jsx)(tt,{visible:void 0!==c,duration:.25,className:"item-info",children:c&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("p",{children:(null===(e=$[c.name])||void 0===e?void 0:e.label)||"NO LABEL"}),Object(V.jsx)("hr",{style:{borderBottom:"0.1vh"}})]})})})]})},bt=n(33),vt=n(32),ft=function(t){var e=t.infoVisible,n=t.setInfoVisible;return Object(V.jsxs)("div",{className:"info-main",style:{visibility:e?"visible":"hidden"},children:[Object(V.jsx)(vt.a,{icon:bt.b,onClick:function(){return n(!1)},className:"info-exit-icon"}),Object(V.jsx)("h2",{children:"Useful Controls"}),Object(V.jsx)("p",{children:"[CTRL + LMB] - Fast move stack of items into another inventory"}),Object(V.jsx)("p",{children:"[SHIFT + Drag] - Split item quantity into half"}),Object(V.jsx)("p",{children:"[CTRL + SHIFT + LMB] - Fast move half a stack of items into another inventory"}),Object(V.jsx)("p",{children:"[ALT + LMB] - Fast use item"}),Object(V.jsx)("span",{className:"info-ox",onClick:function(){return U({text:"Made with \ud83e\udde1 by the overextended \ud83d\udc02 team"})},children:"\ud83d\udc02"})]})},jt=function(){var t=C(L),e=T(),n=Object(i.useState)(!1),r=Object(R.a)(n,2),o=r[0],c=r[1],a=Object(st.a)((function(){return{accept:"SLOT",drop:function(t){K("useItem",t.item)}}})),s=Object(R.a)(a,2)[1],u=Object(st.a)((function(){return{accept:"SLOT",drop:function(t){return e=t.item,void Y.b.success("Give ".concat(e.name));var e}}}),[t]),l=Object(R.a)(u,2)[1];return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(tt,{visible:o,duration:.25,className:"info-fade",children:Object(V.jsx)(ft,{infoVisible:o,setInfoVisible:c})}),Object(V.jsxs)("div",{className:"column-wrapper",style:{margin:"1vh"},children:[Object(V.jsx)("input",{type:"number",className:"button input",min:0,defaultValue:t,onChange:function(t){e(O(t.target.valueAsNumber))}}),Object(V.jsx)("button",{ref:s,className:"button",children:"Use"}),Object(V.jsx)("button",{ref:l,className:"button",children:"Give"}),Object(V.jsx)("button",{className:"button",onClick:function(){return K("exit")},children:"Close"}),Object(V.jsx)("div",{className:"misc-btns",children:Object(V.jsx)("button",{onClick:function(){return c(!0)},children:Object(V.jsx)(vt.a,{icon:bt.a})})})]})]})},yt=function(t){var e=t.items,n=Object(i.useState)(!1),r=Object(R.a)(n,2),o=r[0],c=r[1],a=Object(i.useState)(),s=Object(R.a)(a,2),u=s[0],l=s[1];return F("toggleHotbar",(function(){o?c(!1):(u&&clearTimeout(u),c(!0),l(setTimeout((function(){return c(!1)}),3e3)))})),Object(V.jsx)("div",{className:"center-wrapper",children:Object(V.jsx)(tt,{visible:o,className:"hotbar-grid",children:e.map((function(t){var e,n,r;return Object(V.jsx)("div",{className:"item-container",style:{backgroundImage:"url(".concat("/web/build"+"/images/".concat(t.name,".png"),")")||!1},children:v(t)&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("div",{className:"item-count",children:Object(V.jsxs)("span",{children:[t.weight>=1e3?"".concat((t.weight/1e3).toLocaleString("en-us",{minimumFractionDigits:2}),"kg"):"".concat(t.weight.toLocaleString("en-us",{minimumFractionDigits:0}),"g")," ",null===(e=t.count)||void 0===e?void 0:e.toLocaleString("en-us"),"x"]})}),(null===(n=t.metadata)||void 0===n?void 0:n.durability)&&Object(V.jsx)(ct,{percent:t.metadata.durability,durability:!0}),Object(V.jsxs)("div",{className:"item-label",children:["[",t.slot,"] ",(null===(r=$[t.name])||void 0===r?void 0:r.label)||"NO LABEL"]})]})},"hotbar-".concat(t.slot))}))})})},Ot=["Escape"],ht=function(){var t=o.a.useState(!1),e=Object(R.a)(t,2),n=e[0],r=e[1];F("setInventoryVisible",r),F("closeInventory",r),function(t){var e=Object(i.useRef)(D);Object(i.useEffect)((function(){e.current=t}),[t]),Object(i.useEffect)((function(){var t=function(t){Ot.includes(t.code)&&(e.current(!1),K("exit"))};return window.addEventListener("keyup",t),function(){return window.removeEventListener("keyup",t)}}),[])}(r);var c=C(S),a=C(k),s=T();return F("setupInventory",(function(t){s(g(t)),!n&&r(!0)})),F("refreshSlots",(function(t){return s(I(t))})),Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(tt,{visible:n,className:"center-wrapper",children:[Object(V.jsx)(mt,{inventory:c}),Object(V.jsx)(jt,{}),Object(V.jsx)(mt,{inventory:a})]}),Object(V.jsx)(yt,{items:c.items.slice(0,5)})]})},gt=function(){F("items",(function(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var r=Object(R.a)(n[e],2),i=r[0],o=r[1];$[i]=o}}));var t=Z("Shift"),e=T();return o.a.useEffect((function(){e(h(t))}),[t,e]),Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(G,{}),Object(V.jsx)(J,{}),Object(V.jsx)(ht,{}),Object(V.jsx)(X,{})]})};n(50);a.a.render(Object(V.jsx)(o.a.StrictMode,{children:Object(V.jsx)(s.a,{store:E,children:Object(V.jsx)(u.a,{backend:l.a,options:{enableMouseEvents:!0},children:Object(V.jsx)(gt,{})})})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.b831a995.chunk.js.map